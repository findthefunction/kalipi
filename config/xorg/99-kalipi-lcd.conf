# KaliPi â€” X11 config for 3.5" SPI LCD on /dev/fb1
#
# The framebuffer is 320x480 (portrait) because the fbtft driver reports
# the physical panel dimensions. The LCD controller's rotate=90 (MADCTL)
# handles hardware scanout rotation, but X11 doesn't know about it.
#
# "Rotate CW" tells the fbdev driver to present a 480x320 virtual screen
# to applications while rendering CW-rotated into the 320x480 fb.
# Combined with the LCD controller's rotate=90, the display is correct.
#
# If the image appears upside-down, change "CW" to "CCW".
# If no LCD controller rotation is used (rotate=0 in config.txt),
# "CW" alone provides landscape orientation.

Section "Device"
    Identifier  "SPI LCD"
    Driver      "fbdev"
    Option      "fbdev" "/dev/fb1"
    Option      "Rotate" "CW"
EndSection

Section "Monitor"
    Identifier  "LCD Monitor"
EndSection

Section "Screen"
    Identifier  "SPI Screen"
    Device      "SPI LCD"
    Monitor     "LCD Monitor"
    DefaultDepth 16
    SubSection "Display"
        Depth   16
        Modes   "480x320"
    EndSubSection
    SubSection "Display"
        Depth   24
        Modes   "480x320"
    EndSubSection
EndSection

Section "ServerLayout"
    Identifier  "KaliPi Layout"
    Screen      "SPI Screen"
EndSection
